{
    "requires": ["bare-metal", "mbedtls", "mcuboot", "flashiap-block-device", "spif-driver", "qspif", "mbed-trace", "filesystem", "fat_chan", "littlefs", "rtos", "cmsis-cmsis5-rtos2", "events"],
    "macros": ["USE_USB_HS", "LOWSPEED=1", "MBEDTLS_USER_CONFIG_FILE=\"mbedtls_config.h\""],
    "config": {
        "serial-bootloader-enable": {
            "help": "Build bootloader with serial update support",
            "value": 0
        }
    },
    "target_overrides": {
        "*": {
            "target.restrict_size": "0x20000",
            "target.c_lib": "small",
            "mcuboot.log-level": "MCUBOOT_LOG_LEVEL_DEBUG",
            "mbed-trace.enable": true,
            "mbed-trace.fea-ipv6": false
        },
        "NRF52840_DK": {
            "target.features_remove": ["CRYPTOCELL310"],
            "target.macros_remove": ["MBEDTLS_CONFIG_HW_SUPPORT"],
            "mcuboot.primary-slot-address": "0x20000",
            "mcuboot.slot-size": "0xC0000",
            "mcuboot.scratch-address": "0xE0000",
            "mcuboot.scratch-size": "0x20000",
            "mcuboot.max-img-sectors": "0x180",
            "mcuboot.read-granularity": 4,
            "qspif.QSPI_MIN_PROG_SIZE": 4
        },
        "EP_AGORA": {
            "target.features_remove": ["CRYPTOCELL310"],
            "target.macros_remove": ["MBEDTLS_CONFIG_HW_SUPPORT"],
            "mcuboot.primary-slot-address": "0x20000",
            "mcuboot.slot-size": "0xC0000",
            "mcuboot.scratch-address": "0xE0000",
            "mcuboot.scratch-size": "0x20000",
            "mcuboot.max-img-sectors": "0x180",
            "mcuboot.read-granularity": 4,
            "qspif.QSPI_MIN_PROG_SIZE": 4
        },
        "DISCO_L475VG_IOT01A": {
            "mcuboot.primary-slot-address": "0x8020000",
            "mcuboot.slot-size": "0xC0000",
            "mcuboot.scratch-address": "0x80E0000",
            "mcuboot.scratch-size": "0x20000",
            "mcuboot.max-img-sectors": "0x180",
            "mcuboot.read-granularity": 1,
            "qspif.QSPI_MIN_PROG_SIZE": 1
        },
        "PORTENTA_H7_M7": {
            "target.clock_source": "USE_PLL_HSE_EXTC",
            "target.use-mpu": false,
            "target.components_remove" : ["WHD", "4343W_FS", "CYW43XXX"],
            "target.extra_labels_remove" : ["CORDIO"],
            "target.features_remove" : ["BLE"],
            "target.device_has_remove": ["USBDEVICE", "EMAC", "CAN", "SPI_ASYNCH", "SPISLAVE", "SPI","SERIAL_FC", "PWMOUT", "ANALOGIN", "ANALOGOUT", "I2CSLAVE", "I2C_ASYNC", "OSPI"],
            "platform.stdio-baud-rate": 115200,
            "mcuboot.primary-slot-address": "0x8020000",
            "mcuboot.slot-size": "0xC0000",
            "mcuboot.scratch-address": "0x80E0000",
            "mcuboot.scratch-size": "0x20000",
            "mcuboot.max-img-sectors": "0x180",
            "mcuboot.max-align": 32,
            "mcuboot.file-as-blockdevice": true,
            "mcuboot.mcuboot-as-envie": true,
            "mcuboot.encrypt-rsa": true
        }
    }
}
